"use strict";(self.webpackChunklayotto_docusaurus=self.webpackChunklayotto_docusaurus||[]).push([[1890],{4386:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>i});var s=o(4848),n=o(8453);const r={},c="Prometheus metrics \u63a5\u5165",l={id:"start/trace/prometheus",title:"Prometheus metrics \u63a5\u5165",description:"\u8fd0\u884cprometheus",source:"@site/docs/start/trace/prometheus.md",sourceDirName:"start/trace",slug:"/start/trace/prometheus",permalink:"/layotto/docs/start/trace/prometheus",draft:!1,unlisted:!1,editUrl:"https://github.com/mosn/layotto/edit/main/start/trace/prometheus.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Jaeger trace \u63a5\u5165",permalink:"/layotto/docs/start/trace/jaeger"},next:{title:"\u5c06\u4e1a\u52a1\u903b\u8f91\u901a\u8fc7WASM\u4e0b\u6c89\u8fdbsidecar",permalink:"/layotto/docs/start/wasm/start"}},a={},i=[{value:"\u8fd0\u884cprometheus",id:"\u8fd0\u884cprometheus",level:2},{value:"\u8fd0\u884clayotto",id:"\u8fd0\u884clayotto",level:2},{value:"\u8fd0\u884c Demo",id:"\u8fd0\u884c-demo",level:2},{value:"\u6e05\u7406\u8d44\u6e90",id:"\u6e05\u7406\u8d44\u6e90",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"prometheus-metrics-\u63a5\u5165",children:"Prometheus metrics \u63a5\u5165"}),"\n",(0,s.jsx)(t.h2,{id:"\u8fd0\u884cprometheus",children:"\u8fd0\u884cprometheus"}),"\n",(0,s.jsx)(t.p,{children:"window\u7528\u6237\u9700\u8981\u5c06prometheus.yml\u4e2d\u7684layotto\u6539\u6210'docker.for.windows.localhost:34903'"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://gw.alipayobjects.com/mdn/rms_5891a1/afts/img/A*mMAeSa8VQ-UAAAAAAAAAAAAAARQnAQ",alt:""})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"cd ${project_path}/demo/prometheus\n\ndocker-compose -f prometheus-docker-compose.yaml up -d\n"})}),"\n",(0,s.jsx)(t.h2,{id:"\u8fd0\u884clayotto",children:"\u8fd0\u884clayotto"}),"\n",(0,s.jsx)(t.p,{children:"\u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u542f\u52a8\u4e00\u4e2alayotto\u7684server\uff1a"}),"\n",(0,s.jsx)(t.p,{children:"\u5207\u6362\u76ee\u5f55:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"cd ${project_path}/cmd/layotto\n"})}),"\n",(0,s.jsx)(t.p,{children:"\u6784\u5efa:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",metastring:"@if.not.exist layotto",children:"go build -o layotto\n"})}),"\n",(0,s.jsx)(t.p,{children:"\u8fd0\u884c:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",metastring:"@background",children:"./layotto start -c ../../configs/config_standalone.json\n"})}),"\n",(0,s.jsx)(t.h2,{id:"\u8fd0\u884c-demo",children:"\u8fd0\u884c Demo"}),"\n",(0,s.jsxs)(t.p,{children:["\u5bf9\u5e94\u7684\u8c03\u7528\u7aef\u4ee3\u7801\u5728",(0,s.jsx)(t.a,{href:"https://github.com/mosn/layotto/blob/main/demo/flowcontrol/client.go",children:"client.go"})," \u4e2d\uff0c\u8fd0\u884c\u5b83\u4f1a\u8c03\u7528layotto\u7684SayHello\u63a5\u53e3\uff1a"]}),"\n",(0,s.jsx)(t.p,{children:"\u5207\u6362\u76ee\u5f55:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:" cd ${project_path}/demo/flowcontrol/\n"})}),"\n",(0,s.jsx)(t.p,{children:"\u6784\u5efa:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",metastring:"@if.not.exist client ",children:" go build -o client\n"})}),"\n",(0,s.jsx)(t.p,{children:"\u8fd0\u884c:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./client\n"})}),"\n",(0,s.jsxs)(t.p,{children:["\u8bbf\u95ee ",(0,s.jsx)(t.a,{href:"http://127.0.0.1:9090/graph?g0.expr=grpc_request_total",children:"http://127.0.0.1:9090/graph?g0.expr=grpc_request_total"})]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://gw.alipayobjects.com/mdn/rms_5891a1/afts/img/A*mEVNSZMvtvEAAAAAAAAAAAAAARQnAQ",alt:""})}),"\n",(0,s.jsx)(t.h2,{id:"\u6e05\u7406\u8d44\u6e90",children:"\u6e05\u7406\u8d44\u6e90"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"cd ${project_path}/demo/prometheus\n\ndocker-compose -f prometheus-docker-compose.yaml down\n"})})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>c,x:()=>l});var s=o(6540);const n={},r=s.createContext(n);function c(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);