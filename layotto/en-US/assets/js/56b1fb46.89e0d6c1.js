"use strict";(self.webpackChunklayotto_docusaurus=self.webpackChunklayotto_docusaurus||[]).push([[5895],{3723:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>r,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var n=o(4848),i=o(8453);const a={},s="Configuration API demo with Nacos",c={id:"start/configuration/start-nacos",title:"Configuration API demo with Nacos",description:"TThis example shows how to add, delete, modify, and watch the nacos configuration center through Layotto.",source:"@site/i18n/en-US/docusaurus-plugin-content-docs/current/start/configuration/start-nacos.md",sourceDirName:"start/configuration",slug:"/start/configuration/start-nacos",permalink:"/layotto/en-US/docs/start/configuration/start-nacos",draft:!1,unlisted:!1,editUrl:"https://github.com/mosn/layotto/edit/main/start/configuration/start-nacos.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Configuration API demo with Etcd",permalink:"/layotto/en-US/docs/start/configuration/start"},next:{title:"Use Pub/Sub API to implement pub/sub pattern",permalink:"/layotto/en-US/docs/start/pubsub/start"}},r={},l=[{value:"Deploy  Nacos and Layotto",id:"deploy--nacos-and-layotto",level:2},{value:"Method 1: Start through Docker Compose",id:"method-1-start-through-docker-compose",level:3},{value:"Method 2: Start through local compilation",id:"method-2-start-through-local-compilation",level:3},{value:"Start client APP",id:"start-client-app",level:2},{value:"Next step",id:"next-step",level:2},{value:"What did this demo do?",id:"what-did-this-demo-do",level:3},{value:"Let&#39;s continue to experience other APIs",id:"lets-continue-to-experience-other-apis",level:3}];function d(e){const t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"configuration-api-demo-with-nacos",children:"Configuration API demo with Nacos"}),"\n",(0,n.jsxs)(t.p,{children:["TThis example shows how to add, delete, modify, and watch the ",(0,n.jsx)(t.a,{href:"https://nacos.io/zh-cn/index.html",children:"nacos configuration center"})," through Layotto."]}),"\n",(0,n.jsx)(t.p,{children:"The architecture of this example is shown in the figure below. The processes started are: client APP, Layotto, Nacos server"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:o(6590).A+"",width:"526",height:"64"})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://github.com/mosn/layotto/blob/main/configs/config_nacos.json",children:"Then config file"})," claims ",(0,n.jsx)(t.code,{children:"nacos"})," in the ",(0,n.jsx)(t.code,{children:"config_store"})," section, but users can change it to other configuration center they want (currently only support nacos and nacos)."]}),"\n",(0,n.jsx)(t.h2,{id:"deploy--nacos-and-layotto",children:"Deploy  Nacos and Layotto"}),"\n",(0,n.jsx)(t.h3,{id:"method-1-start-through-docker-compose",children:"Method 1: Start through Docker Compose"}),"\n",(0,n.jsxs)(t.p,{children:["You can start nacos and Layotto with ",(0,n.jsx)(t.a,{href:"https://docs.docker.com/compose/",children:"docker-compose"})]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"cd docker/layotto-nacos\n# Start nacos and layotto with docker-compose\ndocker-compose up -d\n"})}),"\n",(0,n.jsx)(t.h3,{id:"method-2-start-through-local-compilation",children:"Method 2: Start through local compilation"}),"\n",(0,n.jsxs)(t.p,{children:["You can start Nacos using the methods provided in the ",(0,n.jsx)(t.a,{href:"https://nacos.io/zh-cn/docs/quick-start-docker.html",children:"Nacos official documentation"})," and then compile and run Layotto locally."]}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"[!TIP|label: Not for Windows users]\nLayotto fails to compile under Windows. Windows users are recommended to deploy using docker-compose"}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"start-client-app",children:"Start client APP"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:" cd ${project_path}/demo/configuration/common\n"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",metastring:"@if.not.exist client",children:" go build -o client\n"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:' ./client -s "config_demo"\n'})}),"\n",(0,n.jsx)(t.p,{children:"If the following information is printed out, it means the client app has done all the CRUD operations successfully\uff1a"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:'runtime client initializing for: 127.0.0.1:34904\nsave key success\nget configuration after save, &{Key:key1 Content:value1 Group:application Label: Tags:map[] Metadata:map[]} \nget configuration after save, &{Key:haha Content:heihei Group:application Label: Tags:map[] Metadata:map[]} \ndelete keys success\nwrite start\nreceive subscribe resp store_name:"config_demo"  app_id:"testApplication_yang"  items:{key:"heihei"  content:"heihei1"  group:"application"}\nwrite start\nreceive subscribe resp store_name:"config_demo"  app_id:"testApplication_yang"  items:{key:"heihei"  content:"heihei2"  group:"application"}\nwrite start\nreceive subscribe resp store_name:"config_demo"  app_id:"testApplication_yang"  items:{key:"heihei"  content:"heihei3"  group:"application"}\nwrite start\nreceive subscribe resp store_name:"config_demo"  app_id:"testApplication_yang"  items:{key:"heihei"  content:"heihei4"  group:"application"}\n'})}),"\n",(0,n.jsx)(t.h2,{id:"next-step",children:"Next step"}),"\n",(0,n.jsx)(t.h3,{id:"what-did-this-demo-do",children:"What did this demo do?"}),"\n",(0,n.jsx)(t.p,{children:"The demo client uses the golang version SDK provided by Layotto, and invokes Layotto's Configuration API to add, delete, modify, and subscribe to configuration data."}),"\n",(0,n.jsxs)(t.p,{children:["The sdk is located in the ",(0,n.jsx)(t.code,{children:"sdk"})," directory. Users can invoke the Layotto API using the sdk."]}),"\n",(0,n.jsx)(t.p,{children:"In addition to using sdk, you can also interact with Layotto directly through grpc in any language you like."}),"\n",(0,n.jsx)(t.p,{children:"In fact, sdk is only a very thin package for grpc, using sdk is about equal to directly using grpc."}),"\n",(0,n.jsx)(t.h3,{id:"lets-continue-to-experience-other-apis",children:"Let's continue to experience other APIs"}),"\n",(0,n.jsx)(t.p,{children:"Explore other Quickstarts through the navigation bar on the left."})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},6590:(e,t,o)=>{o.d(t,{A:()=>n});const n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAg4AAABACAYAAABydv8MAAAAAXNSR0IArs4c6QAABJ10RVh0bXhmaWxlACUzQ214ZmlsZSUyMGhvc3QlM0QlMjJhcHAuZGlhZ3JhbXMubmV0JTIyJTIwbW9kaWZpZWQlM0QlMjIyMDIzLTA2LTMwVDE0JTNBMDYlM0EwNi4xMDJaJTIyJTIwYWdlbnQlM0QlMjJNb3ppbGxhJTJGNS4wJTIwKFgxMSUzQiUyMExpbnV4JTIweDg2XzY0KSUyMEFwcGxlV2ViS2l0JTJGNTM3LjM2JTIwKEtIVE1MJTJDJTIwbGlrZSUyMEdlY2tvKSUyMENocm9tZSUyRjExMy4wLjAuMCUyMFNhZmFyaSUyRjUzNy4zNiUyMiUyMGV0YWclM0QlMjI3WlZYVlBNNEFlZ1B5VFlrYkpaaCUyMiUyMHZlcnNpb24lM0QlMjIyMS41LjIlMjIlMjB0eXBlJTNEJTIyZGV2aWNlJTIyJTNFJTNDZGlhZ3JhbSUyMG5hbWUlM0QlMjIlRTclQUMlQUMlMjAxJTIwJUU5JUExJUI1JTIyJTIwaWQlM0QlMjJ6SVJIdUJPRkNBcXM1dWI2YnBWTiUyMiUzRTVWZE5qNXN3RVAwMUhDc0JabG4yMkdhejdXRXJWWTNVVlk4VzltSlhocUZtQ0tHJTJGdm1ZeFgyRkRrME9TcnZZRWZoNWp6N3ozUnNZaHEzVDNXZE5jZkFYR2xlTzdiT2VRZThmM3ZZQUU1dEVnZFl0RXJ0OENpWmFzaGR3QjJNZyUyRjNLN3MwRkl5WGxpc2hSQkFvY3luWUF4WnhtT2NZRlJycUtaaHo2RFlCTWhwd21mQUpxWnFqajVKaHNKbTRkOE8lMkJCY3VFOUh0N0lWMzdVeEt1MkNiU1NFb2cyb0VrYlZEVmhvQTI3ZDB0JTJCS3FLZDYwTGc4SFp2dURhWjdoTVF0eSUyRmJUNiUyRmdOZCUyQnNoJTJCM3dzUlBmOHMyQWZMVG9GMWx6Qm5Kbjg3QkkwQ0VzaW9XZyUyRm9KdzFseG5qelZkZU1ocGhIZ055QW5nRiUyRmNjVGFra2xMQkFNSlRKV2RiZmRzTmpxWWlvVUtLSFhNRjg3ZlNZTHFoT05Dbk44WDNDaVZROHBSMTJhZDVvcWkzRTdQUWExa2tqN09MdjJv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"},8453:(e,t,o)=>{o.d(t,{R:()=>s,x:()=>c});var n=o(6540);const i={},a=n.createContext(i);function s(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);