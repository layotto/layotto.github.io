"use strict";(self.webpackChunklayotto_docusaurus=self.webpackChunklayotto_docusaurus||[]).push([[7936],{4751:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>i});var t=n(4848),r=n(8453);const s={},d="Zookeeper",c={id:"component_specs/sequencer/zookeeper",title:"Zookeeper",description:"metadata fields",source:"@site/i18n/en-US/docusaurus-plugin-content-docs/current/component_specs/sequencer/zookeeper.md",sourceDirName:"component_specs/sequencer",slug:"/component_specs/sequencer/zookeeper",permalink:"/layotto/en-US/docs/component_specs/sequencer/zookeeper",draft:!1,unlisted:!1,editUrl:"https://github.com/mosn/layotto/edit/main/component_specs/sequencer/zookeeper.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Redis",permalink:"/layotto/en-US/docs/component_specs/sequencer/redis"},next:{title:"MongoDB",permalink:"/layotto/en-US/docs/component_specs/sequencer/mongo"}},l={},i=[{value:"metadata fields",id:"metadata-fields",level:2},{value:"Warning",id:"warning",level:2},{value:"How to start Zookeeper",id:"how-to-start-zookeeper",level:2},{value:"Run layotto",id:"run-layotto",level:2},{value:"Run Demo",id:"run-demo",level:2}];function a(e){const o={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.h1,{id:"zookeeper",children:"Zookeeper"}),"\n",(0,t.jsx)(o.h2,{id:"metadata-fields",children:"metadata fields"}),"\n",(0,t.jsx)(o.p,{children:"Example: configs/config_zookeeper.json"}),"\n",(0,t.jsxs)(o.table,{children:[(0,t.jsx)(o.thead,{children:(0,t.jsxs)(o.tr,{children:[(0,t.jsx)(o.th,{children:"Field"}),(0,t.jsx)(o.th,{children:"Required"}),(0,t.jsx)(o.th,{children:"Description"})]})}),(0,t.jsxs)(o.tbody,{children:[(0,t.jsxs)(o.tr,{children:[(0,t.jsx)(o.td,{children:"zookeeperHosts"}),(0,t.jsx)(o.td,{children:"Y"}),(0,t.jsx)(o.td,{children:"zookeeper server address, such as localhost:6380"})]}),(0,t.jsxs)(o.tr,{children:[(0,t.jsx)(o.td,{children:"zookeeperPassword"}),(0,t.jsx)(o.td,{children:"Y"}),(0,t.jsx)(o.td,{children:"zookeeper Password"})]}),(0,t.jsxs)(o.tr,{children:[(0,t.jsx)(o.td,{children:"sessionTimeout"}),(0,t.jsx)(o.td,{children:"N"}),(0,t.jsx)(o.td,{children:"Session timeout,Unit second, same as zookeeper's sessionTimeout"})]}),(0,t.jsxs)(o.tr,{children:[(0,t.jsx)(o.td,{children:"logInfo"}),(0,t.jsx)(o.td,{children:"N"}),(0,t.jsxs)(o.td,{children:[(0,t.jsx)(o.code,{children:"true"})," means zookeeper log messages with info level should be logged; ",(0,t.jsx)(o.code,{children:"false"})," means only error messages should be logged"]})]})]})]}),"\n",(0,t.jsx)(o.h2,{id:"warning",children:"Warning"}),"\n",(0,t.jsx)(o.p,{children:"The sequencer id component of zookeeper is implemented using the version provided by zk. The version cannot exceed int32, and when overflow happens, an error will be returned and error logs will be printed. Nothing else will be processed."}),"\n",(0,t.jsx)(o.p,{children:"It is recommended that you monitor zookeeper carefully and prevent the overflow."}),"\n",(0,t.jsx)(o.h2,{id:"how-to-start-zookeeper",children:"How to start Zookeeper"}),"\n",(0,t.jsx)(o.p,{children:"If you want to run the zookeeper demo, you need to start a Zookeeper server with Docker first."}),"\n",(0,t.jsx)(o.p,{children:"command:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-shell",children:"docker pull zookeeper\ndocker run --privileged=true -d --name zookeeper --publish 2181:2181  -d zookeeper:latest\n"})}),"\n",(0,t.jsx)(o.h2,{id:"run-layotto",children:"Run layotto"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-shell",children:"cd ${project_path}/cmd/layotto\ngo build\n"})}),"\n",(0,t.jsxs)(o.blockquote,{children:["\n",(0,t.jsxs)(o.p,{children:["If build reports an error, it can be executed in the root directory of the project ",(0,t.jsx)(o.code,{children:"go mod vendor"})]}),"\n"]}),"\n",(0,t.jsx)(o.p,{children:"Execute after the compilation is successful:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-shell",children:"./layotto start -c ../../configs/config_zookeeper.json\n"})}),"\n",(0,t.jsx)(o.h2,{id:"run-demo",children:"Run Demo"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-shell",children:"cd ${project_path}/demo/sequencer/zookeeper/\n go build -o client\n ./client \n"})})]})}function h(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,o,n)=>{n.d(o,{R:()=>d,x:()=>c});var t=n(6540);const r={},s=t.createContext(r);function d(e){const o=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function c(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),t.createElement(s.Provider,{value:o},e.children)}}}]);