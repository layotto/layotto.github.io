"use strict";(self.webpackChunklayotto_docusaurus=self.webpackChunklayotto_docusaurus||[]).push([[8988],{3143:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>i});var r=t(4848),c=t(8453);const s={},o="Jaeger trace",l={id:"start/trace/jaeger",title:"Jaeger trace",description:"Configuration",source:"@site/i18n/en-US/docusaurus-plugin-content-docs/current/start/trace/jaeger.md",sourceDirName:"start/trace",slug:"/start/trace/jaeger",permalink:"/layotto/en-US/docs/start/trace/jaeger",draft:!1,unlisted:!1,editUrl:"https://github.com/mosn/layotto/edit/main/docs/i18n/en-US/docusaurus-plugin-content-docs/current/start/trace/jaeger.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"ZipKin trace access",permalink:"/layotto/en-US/docs/start/trace/zipkin"},next:{title:"Prometheus metrics",permalink:"/layotto/en-US/docs/start/trace/prometheus"}},a={},i=[{value:"Configuration",id:"configuration",level:2},{value:"Run Jaeger",id:"run-jaeger",level:2},{value:"Run layotto",id:"run-layotto",level:2},{value:"Run Demo",id:"run-demo",level:2},{value:"Clean up resources",id:"clean-up-resources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"jaeger-trace",children:"Jaeger trace"}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Example\uff1aconfigs/config_trace_jaeger.json"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "tracing": {\n    "enable": true,\n    "driver": "jaeger",\n    "config": {\n      "service_name": "layotto"\n    }\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Fields"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Note"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"service_name"}),(0,r.jsx)(n.td,{children:"Y"}),(0,r.jsx)(n.td,{children:"Service Name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"agent_host"}),(0,r.jsx)(n.td,{children:"N"}),(0,r.jsx)(n.td,{children:"agent component port"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Strategy"}),(0,r.jsx)(n.td,{children:"N"}),(0,r.jsxs)(n.td,{children:["Data reporting, default using collector method. Optional configuration values include ",(0,r.jsx)(n.code,{children:"collector"})," and ",(0,r.jsx)(n.code,{children:"agent"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"collector_endpoint"}),(0,r.jsx)(n.td,{children:"N"}),(0,r.jsx)(n.td,{children:"port number for collector, default http:///127.0.0.1:14268/api/traces"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"run-jaeger",children:"Run Jaeger"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"cd ${project_path}/diagnostics/jaeger\n\ndocker-compose -f jaeger-docker-compose.yaml up -d\n"})}),"\n",(0,r.jsx)(n.h2,{id:"run-layotto",children:"Run layotto"}),"\n",(0,r.jsx)(n.p,{children:"A layoto's server\uff1a can be started as follows."}),"\n",(0,r.jsx)(n.p,{children:"Switch directory:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"cd ${project_path}/cmd/layotto_multiple_api\n"})}),"\n",(0,r.jsx)(n.p,{children:"Build:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:"@if.not.exist layotto",children:"go build -o layotto\n"})}),"\n",(0,r.jsx)(n.p,{children:"Run:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:"@background",children:"./layotto start -c ../../configs/config_trace_jaeger.json \n"})}),"\n",(0,r.jsx)(n.h2,{id:"run-demo",children:"Run Demo"}),"\n",(0,r.jsxs)(n.p,{children:["The corresponding call end code is in",(0,r.jsx)(n.a,{href:"https://github.com/mosn/layotto/blob/main/demo/flowcontrol/client.go",children:"client.go"}),", which runs the Sayhello interface with layotto\uff1a"]}),"\n",(0,r.jsx)(n.p,{children:"Switch directory:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:" cd ${project_path}/demo/flowcontrol/\n"})}),"\n",(0,r.jsx)(n.p,{children:"Build:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:"@if.not.exist client ",children:" go build -o customer\n"})}),"\n",(0,r.jsx)(n.p,{children:"Run:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"./client\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Visit ",(0,r.jsx)(n.a,{href:"http://localhost:16686",children:"http://localhost:16686"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gw.alipayobjects.com/mdn/rms_5891a1/afts/img/A*-f2LSLAR9YMAAAAAAAAAAAAAARQnAQ",alt:"img.png"})}),"\n",(0,r.jsx)(n.h2,{id:"clean-up-resources",children:"Clean up resources"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"cd ${project_path}/diagnostics/jaeger\n\ndocker-compose -f jaeger-docker-compose.yaml down\n"})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var r=t(6540);const c={},s=r.createContext(c);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);