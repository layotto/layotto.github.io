"use strict";(self.webpackChunklayotto_docusaurus=self.webpackChunklayotto_docusaurus||[]).push([[9072],{7443:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var o=n(4848),s=n(8453);const a={},l="DelayQueue API demo",r={id:"start/delay_queue/start",title:"DelayQueue API demo",description:"This example shows how to invoke Layotto DelayQueue API.",source:"@site/i18n/en-US/docusaurus-plugin-content-docs/current/start/delay_queue/start.md",sourceDirName:"start/delay_queue",slug:"/start/delay_queue/start",permalink:"/layotto/en-US/docs/start/delay_queue/start",draft:!1,unlisted:!1,editUrl:"https://github.com/mosn/layotto/edit/main/start/delay_queue/start.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Use Pub/Sub API to implement pub/sub pattern",permalink:"/layotto/en-US/docs/start/pubsub/start"},next:{title:"Distributed Lock API demo with redis",permalink:"/layotto/en-US/docs/start/lock/start"}},i={},d=[{value:"What is DelayQueue API used for?",id:"what-is-delayqueue-api-used-for",level:2},{value:"step 1. Deploy Layotto",id:"step-1-deploy-layotto",level:2},{value:"<strong>With Docker</strong>",id:"with-docker",level:3},{value:"<strong>Compile locally (not for Windows)</strong>",id:"compile-locally-not-for-windows",level:3},{value:"step 2. Run the client program to invoke Layotto DelayQueue API",id:"step-2-run-the-client-program-to-invoke-layotto-delayqueue-api",level:2},{value:"<strong>Go</strong>",id:"go",level:3},{value:"<strong>Java</strong>",id:"java",level:3},{value:"step 3. Stop containers and release resources",id:"step-3-stop-containers-and-release-resources",level:2},{value:"<strong>Destroy the Docker container</strong>",id:"destroy-the-docker-container",level:3},{value:"Next step",id:"next-step",level:2},{value:"What does this client program do?",id:"what-does-this-client-program-do",level:3},{value:"Details later, let&#39;s continue to experience other APIs",id:"details-later-lets-continue-to-experience-other-apis",level:3},{value:"Reference",id:"reference",level:3}];function c(e){const t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"delayqueue-api-demo",children:"DelayQueue API demo"}),"\n",(0,o.jsx)(t.p,{children:"This example shows how to invoke Layotto DelayQueue API."}),"\n",(0,o.jsx)(t.h2,{id:"what-is-delayqueue-api-used-for",children:"What is DelayQueue API used for?"}),"\n",(0,o.jsx)(t.p,{children:'DelayQueue is a special kind of message queue, which lets you postpone the delivery of new messages to consumers.\nFor example, you can invoke this API and tell the message queue "please send this message to the consumers after 5 minutes".'}),"\n",(0,o.jsx)(t.h2,{id:"step-1-deploy-layotto",children:"step 1. Deploy Layotto"}),"\n",(0,o.jsx)(t.h3,{id:"with-docker",children:(0,o.jsx)(t.strong,{children:"With Docker"})}),"\n",(0,o.jsx)(t.p,{children:"You can start Layotto with docker"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:'docker run -v "$(pwd)/configs/config_standalone.json:/runtime/configs/config.json" -d  -p 34904:34904 --name layotto layotto/layotto start\n'})}),"\n",(0,o.jsx)(t.h3,{id:"compile-locally-not-for-windows",children:(0,o.jsx)(t.strong,{children:"Compile locally (not for Windows)"})}),"\n",(0,o.jsx)(t.p,{children:"You can compile and run Layotto locally."}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"[!TIP|label: Not for Windows users]\nLayotto fails to compile under Windows. Windows users are recommended to deploy using docker"}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"After downloading the project code to the local, switch the code directory and compile:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell",children:"cd ${project_path}/cmd/layotto\n"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell",metastring:"@if.not.exist layotto",children:"go build\n"})}),"\n",(0,o.jsx)(t.p,{children:"Once finished, the layotto binary will be generated in the directory."}),"\n",(0,o.jsx)(t.p,{children:"Run it:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell",metastring:"@background",children:"./layotto start -c ../../configs/config_standalone.json\n"})}),"\n",(0,o.jsx)(t.h2,{id:"step-2-run-the-client-program-to-invoke-layotto-delayqueue-api",children:"step 2. Run the client program to invoke Layotto DelayQueue API"}),"\n",(0,o.jsx)(t.h3,{id:"go",children:(0,o.jsx)(t.strong,{children:"Go"})}),"\n",(0,o.jsx)(t.p,{children:"Build and run the golang demo:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell",children:' cd ${project_path}/demo/delay_queue/common/\n go build -o client\n ./client -s "demo"\n'})}),"\n",(0,o.jsx)(t.p,{children:"If the following information is printed, the demo is successful:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"TODO\n"})}),"\n",(0,o.jsx)(t.h3,{id:"java",children:(0,o.jsx)(t.strong,{children:"Java"})}),"\n",(0,o.jsx)(t.p,{children:"Download java sdk and examples:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell",metastring:"@if.not.exist java-sdk",children:"git clone https://github.com/layotto/java-sdk\n"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell",children:"cd java-sdk\n"})}),"\n",(0,o.jsx)(t.p,{children:"Build the demo:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell",metastring:"@if.not.exist examples-delay_queue/target/examples-delay_queue-jar-with-dependencies.jar",children:"# build example jar\nmvn -f examples-delay_queue/pom.xml clean package\n"})}),"\n",(0,o.jsx)(t.p,{children:"Run it:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell",children:"java -jar examples-delay_queue/target/examples-delay_queue-jar-with-dependencies.jar\n"})}),"\n",(0,o.jsx)(t.p,{children:"If the following information is printed, the demo is successful:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"TODO\n"})}),"\n",(0,o.jsx)(t.h2,{id:"step-3-stop-containers-and-release-resources",children:"step 3. Stop containers and release resources"}),"\n",(0,o.jsx)(t.h3,{id:"destroy-the-docker-container",children:(0,o.jsx)(t.strong,{children:"Destroy the Docker container"})}),"\n",(0,o.jsx)(t.p,{children:"If you started Layotto with docker, you can destroy the container as follows:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"docker rm -f layotto\n"})}),"\n",(0,o.jsx)(t.h2,{id:"next-step",children:"Next step"}),"\n",(0,o.jsx)(t.h3,{id:"what-does-this-client-program-do",children:"What does this client program do?"}),"\n",(0,o.jsx)(t.p,{children:"The demo client program uses the SDK provided by Layotto to invoke the Layotto DelayQueue API."}),"\n",(0,o.jsxs)(t.p,{children:["The golang sdk is located in the ",(0,o.jsx)(t.code,{children:"sdk"})," directory, and the java sdk is in ",(0,o.jsx)(t.a,{href:"https://github.com/layotto/java-sdk",children:"https://github.com/layotto/java-sdk"})]}),"\n",(0,o.jsx)(t.p,{children:"In addition to using sdk, you can also interact with Layotto directly through grpc in any language you like."}),"\n",(0,o.jsx)(t.h3,{id:"details-later-lets-continue-to-experience-other-apis",children:"Details later, let's continue to experience other APIs"}),"\n",(0,o.jsx)(t.p,{children:"Explore other Quickstarts through the navigation bar on the left."}),"\n",(0,o.jsx)(t.h3,{id:"reference",children:"Reference"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.a,{href:"https://mosn.io/layotto/api/v1/delay_queue.html",children:"API Reference"})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>r});var o=n(6540);const s={},a=o.createContext(s);function l(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);