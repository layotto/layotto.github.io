<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-design/lifecycle/apply_configuration" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Dynamically configure the sending, component heated reload | Layotto</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://layotto.github.io/layotto/en-US/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://layotto.github.io/layotto/en-US/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://layotto.github.io/layotto/en-US/docs/design/lifecycle/apply_configuration"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en-US"><meta data-rh="true" name="docsearch:language" content="en-US"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Dynamically configure the sending, component heated reload | Layotto"><meta data-rh="true" name="description" content="Issues addressed"><meta data-rh="true" property="og:description" content="Issues addressed"><link data-rh="true" rel="icon" href="https://gw.alipayobjects.com/zos/bmw-prod/65518bfc-8ba5-4234-a5c5-2bc065e3a5f0.svg"><link data-rh="true" rel="canonical" href="https://layotto.github.io/layotto/en-US/docs/design/lifecycle/apply_configuration"><link data-rh="true" rel="alternate" href="https://layotto.github.io/layotto/en-US/docs/design/lifecycle/apply_configuration" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://layotto.github.io/layotto/docs/design/lifecycle/apply_configuration" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://layotto.github.io/layotto/docs/design/lifecycle/apply_configuration" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B0I4Q5CLN8-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/layotto/en-US/blog/rss.xml" title="Layotto RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/layotto/en-US/blog/atom.xml" title="Layotto Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Layotto" href="/layotto/en-US/opensearch.xml"><link rel="stylesheet" href="/layotto/en-US/assets/css/styles.444c1071.css">
<script src="/layotto/en-US/assets/js/runtime~main.2724c6ea.js" defer="defer"></script>
<script src="/layotto/en-US/assets/js/main.b0113115.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/layotto/en-US/"><div class="navbar__logo"><img src="https://gw.alipayobjects.com/zos/bmw-prod/65518bfc-8ba5-4234-a5c5-2bc065e3a5f0.svg" alt="Layotto Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="https://gw.alipayobjects.com/zos/bmw-prod/65518bfc-8ba5-4234-a5c5-2bc065e3a5f0.svg" alt="Layotto Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Layotto</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/layotto/en-US/docs/">Docs</a><a class="navbar__item navbar__link" href="/layotto/en-US/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/layotto/en-US/docs/design/lifecycle/apply_configuration"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/layotto/en-US/docs/design/lifecycle/apply_configuration" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">English</a></li><li><a href="/layotto/docs/design/lifecycle/apply_configuration" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">简体中文</a></li></ul></div><a href="https://github.com/mosn/layotto" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/layotto/en-US/docs/">Home Page</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/layotto/en-US/docs/start/">Quick Start</a><button aria-label="展开侧边栏分类 &#x27;Quick Start&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/layotto/en-US/docs/start/lab">Online Lab</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/layotto/en-US/docs/building_blocks/file/">User Manual</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/layotto/en-US/docs/configuration/overview">Operations Manual</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/layotto/en-US/docs/design/lifecycle/apply_configuration">Design Doc</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/layotto/en-US/docs/design/lifecycle/apply_configuration">Dynamically configure the sending, component heated reload</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/design/actuator/actuator-design-doc">Actuator Design Document</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/design/actuator/grpc-design-doc">MOSN gRPC framework design document</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/design/configuration/configuration-api-with-apollo">Implementing Configuration API with ctripcorp/apollo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/design/pubsub/pubsub-api-and-compability-with-dapr-component">Layotto Pub/Sub, Compatible Dapr Package Scheme</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/design/rpc/rpc_design_document">RPC Design Document</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/design/lock/lock-api-design">Add TryLock and Unlock API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/design/sequencer/design">Sequencer API design document</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/design/file/file-design">File API design documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/design/faas/faas-poc-design">FaaS Design Document</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/design/api_plugin/design">API Plugin Design Documentation &amp; Use Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/design/api_plugin/dapr_api">dapr_api</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/design/oss/design">Layotto object storage (OSS) and collection of API interface definitions and design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/design/pluggable/design">Pluggable Component Design Document</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/layotto/en-US/docs/development/CONTRIBUTING">Contribute Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/layotto/en-US/docs/community/meeting">Community</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/layotto/en-US/docs/video/">Video collection</a></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home Page" class="breadcrumbs__link" href="/layotto/en-US/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Design Doc</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Dynamically configure the sending, component heated reload</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Overview</button></div><div class="theme-doc-markdown markdown"><h1>Dynamically configure the sending, component heated reload</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="issues-addressed">Issues addressed<a class="hash-link" aria-label="Issues addressed的直接链接" title="Issues addressed的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#issues-addressed">​</a></h2>
<ul>
<li>Now the producer user has a customized set of initialization configurations：with some configurations in the app, after app starts, sidecar, allowing sidecar to be initialized based on these configurations.Programmes are not common enough and are more common to do</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/26001097/168947177-6a26397e-4648-47f0-a8df-e898285cd8f9.png" alt="image" class="img_ev3q"></p>
<ul>
<li>Support &quot;Dynamically Down Configuration&quot;.<!-- -->
<ul>
<li>One idea is to couple the configuration file and mirror to the container via disk.For example, Dapr config item is released into Configuration CRD, CRD changes will require the carrier to reboot the cluster via k8s scroll.</li>
<li>Another line of thought is [inject config_store components into other components] (<a href="https://github.com/mosn/layotto/issues/500#issuomment-1119390497" target="_blank" rel="noopener noreferrer">https://github.com/mosn/layotto/issues/500#issuomment-1119390497</a>) but has some disadvantages:<!-- -->
<ul>
<li>Users who want to use the &quot;Dynamic Configuration&quot; function have no means of extending hands, no community ready-made components, and have to develop their components.
The runtime level is best used for some common features, &quot;empowerment&quot; all components, community maintenance of ready-made components, support for dynamic configuration, and user-friendliness and open boxes.</li>
</ul>
</li>
<li>Another line of thought is to split the configuration between the first expert：bootstrap configuration (static configuration), which is not placed in mirrors, and the dynamic configuration which supports the release of the configuration and heated reload based on the configuration.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="product-design">Product design<a class="hash-link" aria-label="Product design的直接链接" title="Product design的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#product-design">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="user-story">User story<a class="hash-link" aria-label="User story的直接链接" title="User story的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#user-story">​</a></h3>
<ol>
<li>The user changed the disaster switching configuration to Redis on the apollo page, so that the Redis component received the new configuration and switches the traffic to the Disaster Preparedness Cluster</li>
<li>There are already producing users who can migrate the initialization process to a new model that will be compatible downward.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="programming-ui">Programming UI<a class="hash-link" aria-label="Programming UI的直接链接" title="Programming UI的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#programming-ui">​</a></h3>
<p>For example, the start configuration for state.redis now has the following (screenshot taken from <a href="https://docs.dapr.io/reference/components-reference/supported-state-stores/setup-redis/" target="_blank" rel="noopener noreferrer">dapr documents</a>
<img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/26001097/168946975-9804d792-8851-463f-80ee-26231468f0aa.png" alt="image" class="img_ev3q"></p>
<p>The status quo is that these configurations kv are initialized when the：redis component startup; all configurations are static configurations, only once, and no subsequent configuration changes are listened.</p>
<p>But we can change：</p>
<ul>
<li>These kv can be dynamically employed</li>
<li>layotto listen to these kv changes, except for changes that <strong>Reinitialize component with the latest configuration</strong></li>
<li>Dynamic update interface can be implemented if the component feels too small to reinitialize</li>
</ul>
<p>Advantage and disadvantages analysis：</p>
<ul>
<li>pros<!-- -->
<ul>
<li>runtime layer can perform some general functionality, &quot;empowerment&quot; all components; easy access for users, community maintenance of ready-made components, and dynamic configuration support, user open boxes</li>
</ul>
</li>
<li>Cons<!-- -->
<ul>
<li>Realization is complex.How do you ensure that traffic does not damage during reinitialization?</li>
<li>I am not aware that this will not meet users&#x27; production needs, worries about early design, over-design</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-design">High-level design<a class="hash-link" aria-label="High-level design的直接链接" title="High-level design的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#high-level-design">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/26001097/168949648-3f440a84-45d3-45c1-89ef-79cb25d49713.png" alt="image" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exposes-updateconfiguration-api-after-startup">Exposes UpdateConfiguration API after startup<a class="hash-link" aria-label="Exposes UpdateConfiguration API after startup的直接链接" title="Exposes UpdateConfiguration API after startup的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#exposes-updateconfiguration-api-after-startup">​</a></h3>
<p>Sidear starts up or uses json files to make a new API for configuration thermal changes once it is passed:</p>
<div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rpc UpdateConfiguration( RuntimeConfig) returns (UpdateResponse)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="agent-is-responsible-for-interacting-and-calling-the-updateconfiguration-api">Agent is responsible for interacting and calling the UpdateConfiguration API<a class="hash-link" aria-label="Agent is responsible for interacting and calling the UpdateConfiguration API的直接链接" title="Agent is responsible for interacting and calling the UpdateConfiguration API的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#agent-is-responsible-for-interacting-and-calling-the-updateconfiguration-api">​</a></h3>
<p>That is, Sidecar is just opening an interface and waiting for others to configure it.And things that interact with the face and subscribe to configuration changes can be done with an agent 2 on the map, which subscribes to the apollo configuration change, which changes the interface with Sidecar to make Sidecar hot updates.</p>
<p>For existing production users, you can listen to the app feeding configuration, dump configuration, load configuration on reboot and push configuration to Sidecar.</p>
<p>For example, you can write a File Agent issue, listen to file changes, read the new configuration and notify Sidecar to reload.</p>
<p>Agent does not have to be a separate process but also start a separate process in the main one.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="component-hot-reload">Component Hot Reload<a class="hash-link" aria-label="Component Hot Reload的直接链接" title="Component Hot Reload的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#component-hot-reload">​</a></h3>
<p>When Sidecar is brought to an UpdateConfiguration API, it will:</p>
<ol>
<li>No &quot;Increment Update&quot; interface has been implemented by the judging component:</li>
</ol>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">UpdateConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> metadata </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> needReload </span><span class="token builtin">bool</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>runtime tries to update components if they have an interface, runtime</li>
<li>runtime <strong>Reinitialize component based on full configuration</strong> if incremental update fails, or if the interface is not implemented</li>
<li>After the new component has been reinitialized (check through readability), take over traffic from the original component</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="detailed-design">Detailed design<a class="hash-link" aria-label="Detailed design的直接链接" title="Detailed design的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#detailed-design">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grpc-api-design">GRPC API design<a class="hash-link" aria-label="GRPC API design的直接链接" title="GRPC API design的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#grpc-api-design">​</a></h3>
<div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Service Lifecycle L/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rpc ApplyConfiguration(DynamicConfiguration) returnns (ApplyConfigurationResponse) {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message Dynamic Configuration{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Component_config = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} } }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message ApplyConfigurationResponse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="componentconfig-field-design">ComponentConfig Field Design<a class="hash-link" aria-label="ComponentConfig Field Design的直接链接" title="ComponentConfig Field Design的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#componentconfig-field-design">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="design-of-a-common-updating-interface">Design of a common updating interface<a class="hash-link" aria-label="Design of a common updating interface的直接链接" title="Design of a common updating interface的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#design-of-a-common-updating-interface">​</a></h5>
<div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message Composiconfig Fact</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // For example, `lock`, `state`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string type = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // The component name. For example, `state_demo`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string name = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  map&lt;string, string&gt; metadata = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><del>With google/protobuf/struct.proto describe dynamic json see <a href="https://stackoverflow.com/questions/5296644/is-google-proto-the-best-way-to-send-dynamic-json-over-grpc" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/5296644/is-google-proto-the-best-way-to-send-dynamic-json-over-grpc</a></del>!</p>
<p>Upload configuration with <code>map&lt;string, string&gt;</code>.</p>
<ul>
<li>
<p>Advantages
Do not change the sdk of each language for each new API or configuration structure to allow users to pass through and sidecar side to deserialize</p>
</li>
<li>
<p>The
field format does not show definitions, are not clear, and does not have enough personnel</p>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="b-structured-definitions-of-each-class-configuration">b. Structured definitions of each class configuration<a class="hash-link" aria-label="b. Structured definitions of each class configuration的直接链接" title="b. Structured definitions of each class configuration的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#b-structured-definitions-of-each-class-configuration">​</a></h5>
<div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Component configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message ComponentConfigure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // For example, `lock`, `state`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string kind = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // The component name. For example, `state_demo`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string name = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  google. Rotobuf. Cart metadata = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  one of common_config LO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LockCommonConfigurationlock_config = 4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StateCommonConfiguration state_config = 5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Advantage and disadvantages above</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" aria-label="Conclusion的直接链接" title="Conclusion的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#conclusion">​</a></h5>
<p>Select A, reduce the cost of SDK maintenance</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="q-a-separate-api-plugin-or-an-existing-api-plugin">Q: A separate API plugin or an existing API plugin<a class="hash-link" aria-label="Q: A separate API plugin or an existing API plugin的直接链接" title="Q: A separate API plugin or an existing API plugin的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#q-a-separate-api-plugin-or-an-existing-api-plugin">​</a></h4>
<p>Write a separate API plugin</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="q-was-to-configure-vs-active-pull-configuration-vs-push-back">Q: Was to configure vs active pull configuration vs push back<a class="hash-link" aria-label="Q: Was to configure vs active pull configuration vs push back的直接链接" title="Q: Was to configure vs active pull configuration vs push back的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#q-was-to-configure-vs-active-pull-configuration-vs-push-back">​</a></h4>
<p>Wait Push Configuration</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="q-api-accepts-full-or-incremental-configuration">Q: API accepts full or incremental configuration<a class="hash-link" aria-label="Q: API accepts full or incremental configuration的直接链接" title="Q: API accepts full or incremental configuration的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#q-api-accepts-full-or-incremental-configuration">​</a></h4>
<p>Additions, sequencing issues are guaranteed by stream.</p>
<div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">service Lifecycle {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rpc UpdateComponentConfiguration(stream ComponentConfig) returns (UpdateResponse){}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>b. Full amount</p>
<p>Conclusion: b, simplerYou can add an additional interface to make incremental changes via stream, if needed.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="component-api-design">Component API design<a class="hash-link" aria-label="Component API design的直接链接" title="Component API design的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#component-api-design">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Type Dynamic </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> of Jean</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">Marie</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">ApplyConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> metadata </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> needReload </span><span class="token builtin">bool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-work">Future work<a class="hash-link" aria-label="Future work的直接链接" title="Future work的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#future-work">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pubsub-subscriber-service">pubsub subscriber service<a class="hash-link" aria-label="pubsub subscriber service的直接链接" title="pubsub subscriber service的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#pubsub-subscriber-service">​</a></h3>
<p>Requires some more structured configuration data to be released</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="component-hot-reload-1">Component Hot Reload<a class="hash-link" aria-label="Component Hot Reload的直接链接" title="Component Hot Reload的直接链接" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#component-hot-reload-1">​</a></h3>
<p>//TODO</p>
<ul>
<li>How to ensure the loss of data during reinitialization</li>
<li>Config Priority：has some configurations that are customized for a single app and some are common configurations for all app utilities, with priority for both parties</li>
<li>Configure transaction reading and writing to avoid dirty reading</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/mosn/layotto/edit/main/docs/i18n/en-US/docusaurus-plugin-content-docs/current/design/lifecycle/apply_configuration.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/layotto/en-US/docs/operation/local"><div class="pagination-nav__sublabel">pre page</div><div class="pagination-nav__label">How to Debugging Locally</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/layotto/en-US/docs/design/actuator/actuator-design-doc"><div class="pagination-nav__sublabel">next page</div><div class="pagination-nav__label">Actuator Design Document</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#issues-addressed">Issues addressed</a></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#product-design">Product design</a><ul><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#user-story">User story</a></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#programming-ui">Programming UI</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#high-level-design">High-level design</a><ul><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#exposes-updateconfiguration-api-after-startup">Exposes UpdateConfiguration API after startup</a></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#agent-is-responsible-for-interacting-and-calling-the-updateconfiguration-api">Agent is responsible for interacting and calling the UpdateConfiguration API</a></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#component-hot-reload">Component Hot Reload</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#detailed-design">Detailed design</a><ul><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#grpc-api-design">GRPC API design</a></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#component-api-design">Component API design</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#future-work">Future work</a><ul><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#pubsub-subscriber-service">pubsub subscriber service</a></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/design/lifecycle/apply_configuration#component-hot-reload-1">Component Hot Reload</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>