<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-development/test-quickstart" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Automate testing of Quickstart documentation with tools | Layotto</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://layotto.github.io/layotto/en-US/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://layotto.github.io/layotto/en-US/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://layotto.github.io/layotto/en-US/docs/development/test-quickstart"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en-US"><meta data-rh="true" name="docsearch:language" content="en-US"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Automate testing of Quickstart documentation with tools | Layotto"><meta data-rh="true" name="description" content="Quickstart is the face of the project, so if a new user enters the repository and finds that the Quickstart documentation doesn&#x27;t work, they may be disappointed and walk away."><meta data-rh="true" property="og:description" content="Quickstart is the face of the project, so if a new user enters the repository and finds that the Quickstart documentation doesn&#x27;t work, they may be disappointed and walk away."><link data-rh="true" rel="icon" href="https://gw.alipayobjects.com/zos/bmw-prod/65518bfc-8ba5-4234-a5c5-2bc065e3a5f0.svg"><link data-rh="true" rel="canonical" href="https://layotto.github.io/layotto/en-US/docs/development/test-quickstart"><link data-rh="true" rel="alternate" href="https://layotto.github.io/layotto/en-US/docs/development/test-quickstart" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://layotto.github.io/layotto/docs/development/test-quickstart" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://layotto.github.io/layotto/docs/development/test-quickstart" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B0I4Q5CLN8-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/layotto/en-US/blog/rss.xml" title="Layotto RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/layotto/en-US/blog/atom.xml" title="Layotto Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Layotto" href="/layotto/en-US/opensearch.xml"><link rel="stylesheet" href="/layotto/en-US/assets/css/styles.a91448ad.css">
<script src="/layotto/en-US/assets/js/runtime~main.e9584a82.js" defer="defer"></script>
<script src="/layotto/en-US/assets/js/main.6c22ea4e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/layotto/en-US/"><div class="navbar__logo"><img src="https://gw.alipayobjects.com/zos/bmw-prod/65518bfc-8ba5-4234-a5c5-2bc065e3a5f0.svg" alt="Layotto Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="https://gw.alipayobjects.com/zos/bmw-prod/65518bfc-8ba5-4234-a5c5-2bc065e3a5f0.svg" alt="Layotto Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Layotto</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/layotto/en-US/docs/">Docs</a><a class="navbar__item navbar__link" href="/layotto/en-US/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/layotto/en-US/docs/development/test-quickstart"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/layotto/en-US/docs/development/test-quickstart" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">English</a></li><li><a href="/layotto/docs/development/test-quickstart" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">简体中文</a></li></ul></div><a href="https://github.com/mosn/layotto" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/layotto/en-US/docs/">Home Page</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/layotto/en-US/docs/start/">Quick Start</a><button aria-label="展开侧边栏分类 &#x27;Quick Start&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/layotto/en-US/docs/start/lab">Online Lab</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/layotto/en-US/docs/building_blocks/file/">User Manual</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/layotto/en-US/docs/configuration/overview">Operations Manual</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/layotto/en-US/docs/design/lifecycle/apply_configuration">Design Doc</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/layotto/en-US/docs/development/CONTRIBUTING">Contribute Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/development/CONTRIBUTING">Layotto Contributor Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/development/start-from-zero">Newhanded offensive：became a Layotto contributor from zero</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/layotto/en-US/docs/development/contributing-doc">Want to contribute doc?</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/development/contributing-doc">Document Contribution Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/layotto/en-US/docs/development/test-quickstart">Automate testing of Quickstart documentation with tools</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/development/developing-component">Component Development Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/development/component_ref/">layotto component reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/layotto/en-US/docs/api_reference/how_to_generate_api_doc">Want to modify proto files or API definitions?</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/development/github-workflows">Layotto GitHub Workflows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/development/commands">Layotto Commands Guidelines：</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/layotto/en-US/docs/development/label-spec">How to label issue</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/development/release-guide">Publish Handbook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/layotto/en-US/docs/development/problems-to-solve">Multi-Runtime 2022：pending issue</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/layotto/en-US/docs/community/meeting">Community</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/layotto/en-US/docs/video/">Video collection</a></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home Page" class="breadcrumbs__link" href="/layotto/en-US/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Contribute Guide</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Want to contribute doc?</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Automate testing of Quickstart documentation with tools</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Overview</button></div><div class="theme-doc-markdown markdown"><h1>Automate testing of Quickstart documentation with tools</h1>
<p>Quickstart is the face of the project, so if a new user enters the repository and finds that the Quickstart documentation doesn&#x27;t work, they may be disappointed and walk away.</p>
<p>So we need to test Quickstart regularly to make sure it works.</p>
<p>But the process of manually testing Quickstart periodically and fixing exceptions in the documentation is too time-consuming.</p>
<img src="https://gw.alipayobjects.com/mdn/rms_5891a1/afts/img/A*fTI5RbfAK3gAAAAAAAAAAAAAARQnAQ" width="30%" height="30%">
<p>It&#x27;s a pain in the ass!</p>
<p>Let&#x27;s use the tool to test the documentation automatically!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="principle">Principle<a class="hash-link" aria-label="Principle的直接链接" title="Principle的直接链接" href="/layotto/en-US/docs/development/test-quickstart#principle">​</a></h2>
<p>Use the tool to execute all shell scripts in a markdown file sequentially, i.e. all scripts wrapped in:</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token code punctuation" style="color:#393A34">```</span><span class="token code code-language">shell</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code punctuation" style="color:#393A34">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note: The script wrapped in <code>bash</code> blocks will NOT be run.</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token code punctuation" style="color:#393A34">```</span><span class="token code code-language">bash</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code punctuation" style="color:#393A34">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-install-mdx">step 1. Install <code>mdx</code><a class="hash-link" aria-label="step-1-install-mdx的直接链接" title="step-1-install-mdx的直接链接" href="/layotto/en-US/docs/development/test-quickstart#step-1-install-mdx">​</a></h2>
<p>see <a href="https://github.com/seeflood/mdx#installation" target="_blank" rel="noopener noreferrer">https://github.com/seeflood/mdx#installation</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-close-local-software-that-may-cause-conflicts">step 2. Close local software that may cause conflicts<a class="hash-link" aria-label="step 2. Close local software that may cause conflicts的直接链接" title="step 2. Close local software that may cause conflicts的直接链接" href="/layotto/en-US/docs/development/test-quickstart#step-2-close-local-software-that-may-cause-conflicts">​</a></h2>
<p>Close the local Layotto, to avoid port conflicts when running the document.</p>
<p>Similarly, if the documentation will start containers like Redis with Docker, you need to shut down and remove containers that may cause port conflicts and container name conflicts first.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-running-documentation">step 3. Running documentation<a class="hash-link" aria-label="step 3. Running documentation的直接链接" title="step 3. Running documentation的直接链接" href="/layotto/en-US/docs/development/test-quickstart#step-3-running-documentation">​</a></h2>
<p>As an example, run the Quickstart documentation for the state API:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mdx docs/en/start/state/start.md </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-reported-an-error-test-driven-development-optimize-your-documentation">step 4. Reported an error? Test-driven development, optimize your documentation!<a class="hash-link" aria-label="step 4. Reported an error? Test-driven development, optimize your documentation!的直接链接" title="step 4. Reported an error? Test-driven development, optimize your documentation!的直接链接" href="/layotto/en-US/docs/development/test-quickstart#step-4-reported-an-error-test-driven-development-optimize-your-documentation">​</a></h2>
<p>You can think of each document as a UT, which should have 4 phases: prepare, execute, verify, and release resources.</p>
<p>If the document runs with an error, it means that the case needs to be optimized.</p>
<p>This is also the idea of &quot;test-driven development&quot;, optimizing the documentation to make it &quot;testable&quot;, right?</p>
<p>For example, I ran the Quickstart documentation for the state API and found an error:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SaveState succeeded.key:key1 , value: hello world </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GetState succeeded.[key:key1 etag:1]: hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SaveBulkState succeeded.[key:key1 etag:2]: hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SaveBulkState succeeded.[key:key2 etag:2]: hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GetBulkState succeeded.key:key2 ,value:hello world ,etag:1 ,metadata:map[] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GetBulkState succeeded.key:key1 ,value:hello world ,etag:2 ,metadata:map[] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GetBulkState succeeded.key:key3 ,value: ,etag: ,metadata:map[] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GetBulkState succeeded.key:key4 ,value: ,etag: ,metadata:map[] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GetBulkState succeeded.key:key5 ,value: ,etag: ,metadata:map[] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">panic: error deleting state: rpc error: code = Aborted desc = failed deleting state with key key1: possible etag mismatch. error from state store: ERR Error running script (call to f_9b5da7354cb61e2ca9faff50f6c43b81c73c0b94): @user_script:1: user_script:1: failed to delete key1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">goroutine 1 [running]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main.testDelete(0x16bc760, 0xc0000ac000, 0x16c56a0, 0xc0000b90e0, 0x15f30e1, 0x5, 0x15f2539, 0x4)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /Users/qunli/projects/layotto/demo/state/redis/client.go:73 +0x13d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main.main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /Users/qunli/projects/layotto/demo/state/redis/client.go:57 +0x2f4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exit status 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After some troubleshooting, we found that the demo client did not pass the <code>etag</code> field when deleting the specified key, which caused the demo to run abnormally.</p>
<p>See, through the automated testing documentation, we found a Quickstart bug :)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q-how-to-write-testable-documents">Q: How to write &quot;testable&quot; documents<a class="hash-link" aria-label="Q: How to write &quot;testable&quot; documents的直接链接" title="Q: How to write &quot;testable&quot; documents的直接链接" href="/layotto/en-US/docs/development/test-quickstart#q-how-to-write-testable-documents">​</a></h3>
<p>Note: You can refer to the sample documentation that runs the test: docs/en/start/state/start.md</p>
<p>Some common details are explained below.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-demo-code-should-panic-when-it-doesnt-meet-expectations">The demo code should panic when it doesn&#x27;t meet expectations<a class="hash-link" aria-label="The demo code should panic when it doesn&#x27;t meet expectations的直接链接" title="The demo code should panic when it doesn&#x27;t meet expectations的直接链接" href="/layotto/en-US/docs/development/test-quickstart#the-demo-code-should-panic-when-it-doesnt-meet-expectations">​</a></h4>
<p>For example, in the demo <code>demo/state/redis/client.go</code>, if you get an error when calling Layotto, you should just panic:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> cli</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SaveBulkState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> store</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">item2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">panic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In addition to judging errors, the demo should also verify the test results, and panic directly if it does not meet expectations. This is equivalent to UT, after calling a method, the result of the call needs to be verified.</p>
<p>The advantage of this is that once the Quickstart does not meet expectations, the demo will exit abnormally, allowing automated tools to find &quot;the test failed! Find someone to fix it!&quot;</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="it-is-best-to-delete-the-container-and-free-resources-at-the-end-of-the-document">It is best to delete the container and free resources at the end of the document<a class="hash-link" aria-label="It is best to delete the container and free resources at the end of the document的直接链接" title="It is best to delete the container and free resources at the end of the document的直接链接" href="/layotto/en-US/docs/development/test-quickstart#it-is-best-to-delete-the-container-and-free-resources-at-the-end-of-the-document">​</a></h4>
<p>When writing UT, we do things like release resources, restore mocks, etc. in the final stages; to make the document &quot;testable&quot;, do something similar.</p>
<p>For example to delete the redis Docker container at the end of the document:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker rm -f redis-test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note: Layotto&#x27;s github workflow deletes all containers and closes applications such as layotto, etcd after each md is executed.
So even if the container is not deleted in the document, it will not affect the github workflow to run the test.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-should-i-do-if-i-dont-want-a-certain-command-to-be-executed">What should I do if I don&#x27;t want a certain command to be executed?<a class="hash-link" aria-label="What should I do if I don&#x27;t want a certain command to be executed?的直接链接" title="What should I do if I don&#x27;t want a certain command to be executed?的直接链接" href="/layotto/en-US/docs/development/test-quickstart#what-should-i-do-if-i-dont-want-a-certain-command-to-be-executed">​</a></h4>
<p><code>mdx</code> by default will only execute shell code blocks, i.e. code blocks written like this:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">```shell</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you don&#x27;t want a block of code to be executed, you can change the shell to something else, for example:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">```bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="a-certain-shell-command-will-hang-and-affect-the-test-what-should-i-do">A certain shell command will hang and affect the test, what should I do?<a class="hash-link" aria-label="A certain shell command will hang and affect the test, what should I do?的直接链接" title="A certain shell command will hang and affect the test, what should I do?的直接链接" href="/layotto/en-US/docs/development/test-quickstart#a-certain-shell-command-will-hang-and-affect-the-test-what-should-i-do">​</a></h4>
<p>Again, take docs/en/start/state/start.md as an example.</p>
<p>One of the scripts will run Layotto, but if you run it it will hang, preventing the test tool from continuing to run the next command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./layotto start -c ../../configs/config_redis.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>How to do it?</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="solution-1">Solution 1:<a class="hash-link" aria-label="Solution 1:的直接链接" title="Solution 1:的直接链接" href="/layotto/en-US/docs/development/test-quickstart#solution-1">​</a></h5>
<p>Annotated with @background, see <a href="https://github.com/seeflood/mdx#background" target="_blank" rel="noopener noreferrer">https://github.com/seeflood/mdx#background</a></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">```shell @background</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./layotto start -c ../../configs/config_standalone.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="solution-2">Solution 2:<a class="hash-link" aria-label="Solution 2:的直接链接" title="Solution 2:的直接链接" href="/layotto/en-US/docs/development/test-quickstart#solution-2">​</a></h5>
<p>Don&#x27;t run this script, add a &quot;hidden script&quot; that &quot;runs Layotto in the background&quot;, this hidden script is wrapped in a comment, so it won&#x27;t be seen by people reading the documentation, but <code>mdx</code> will still run it:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ```bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ./layotto start -c ../../configs/config_redis.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#### How to deal with the command to switch directories?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">We can assume that the current directory is the project&#x27;s root path.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Then the switch path can be written like this:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># change directory to ${your project path}/demo/state/redis/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> cd demo/state/redis/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> go run .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>What if you want to go back to the root path after running this command?</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="solution-1-1">Solution 1:<a class="hash-link" aria-label="Solution 1:的直接链接" title="Solution 1:的直接链接" href="/layotto/en-US/docs/development/test-quickstart#solution-1-1">​</a></h5>
<p>Use the <code>${project_path}</code> variable to represent the project root path, see <a href="https://github.com/seeflood/mdx#cd-project_path" target="_blank" rel="noopener noreferrer">https://github.com/seeflood/mdx#cd-project_path</a></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd ${project_path}/demo/state/redis/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="solution-2-1">Solution 2:<a class="hash-link" aria-label="Solution 2:的直接链接" title="Solution 2:的直接链接" href="/layotto/en-US/docs/development/test-quickstart#solution-2-1">​</a></h5>
<p>Add a hidden script to switch directories. For example, write:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># open a new terminal tab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># change directory to ${your project path}/demo/state/redis/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd demo/state/redis/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go run .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-markdown-annotations">Other markdown annotations<a class="hash-link" aria-label="Other markdown annotations的直接链接" title="Other markdown annotations的直接链接" href="/layotto/en-US/docs/development/test-quickstart#other-markdown-annotations">​</a></h3>
<p>The mdx tool provides many &quot;markdown annotations&quot; to help you write &quot;runnable markdown files&quot;. If you are interested, you can check the <a href="https://github.com/seeflood/mdx#usage" target="_blank" rel="noopener noreferrer">mdx documentation</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-the-error-and-see-the-effect">Fix the error and see the effect!<a class="hash-link" aria-label="Fix the error and see the effect!的直接链接" title="Fix the error and see the effect!的直接链接" href="/layotto/en-US/docs/development/test-quickstart#fix-the-error-and-see-the-effect">​</a></h3>
<p>After a fix, I ran the document again:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mdx docs/en/start/state/start.md</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The document does not report an error, it can run normally and exit:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">admindeMacBook-Pro-2:layotto qunli$ mdx docs/en/start/state/start.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">latest: Pulling from library/redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Digest: sha256:69a3ab2516b560690e37197b71bc61ba245aafe4525ebdece1d8a0bc5669e3e2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Status: Image is up to date for redis:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker.io/library/redis:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REPOSITORY                     TAG         IMAGE ID       CREATED         SIZE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis                          latest      bba24acba395   3 days ago      113MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pseudomuto/protoc-gen-doc      latest      35472df9ecbb   6 weeks ago     39.5MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apache/skywalking-oap-server   8.0.1-es7   887769fd3bf6   21 months ago   191MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apache/skywalking-ui           8.0.1       42b3b496616e   21 months ago   127MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5835d4652c057ce7ea109564c3e36351335ec53c3dedb02650f2056d3cc3edd5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">appending output to nohup.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">runtime client initializing for: 127.0.0.1:34904</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SaveState succeeded.key:key1 , value: hello world </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GetState succeeded.[key:key1 etag:1]: hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SaveBulkState succeeded.[key:key1 etag:2]: hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SaveBulkState succeeded.[key:key2 etag:2]: hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GetBulkState succeeded.key:key1 ,value:hello world ,etag:2 ,metadata:map[] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GetBulkState succeeded.key:key4 ,value: ,etag: ,metadata:map[] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GetBulkState succeeded.key:key3 ,value: ,etag: ,metadata:map[] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GetBulkState succeeded.key:key5 ,value: ,etag: ,metadata:map[] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GetBulkState succeeded.key:key2 ,value:hello world ,etag:1 ,metadata:map[] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DeleteState succeeded.key:key1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DeleteState succeeded.key:key2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis-test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-modify-ci-to-automatically-test-the-newly-written-quickstart-document">step 5. Modify CI to automatically test the newly written quickstart document<a class="hash-link" aria-label="step 5. Modify CI to automatically test the newly written quickstart document的直接链接" title="step 5. Modify CI to automatically test the newly written quickstart document的直接链接" href="/layotto/en-US/docs/development/test-quickstart#step-5-modify-ci-to-automatically-test-the-newly-written-quickstart-document">​</a></h2>
<p>If you have written a new quickstart document, and the self-test can run normally, the next step is to modify the CI to achieve &quot;every time someone submits a pull request, the tool automatically tests that this quickstart document can run through&quot;.</p>
<p>The modification method is:</p>
<ol>
<li>Modify the script <code>etc/script/test-quickstart.sh</code> to add your documentation to it:</li>
</ol>
<p><img decoding="async" loading="lazy" src="https://gw.alipayobjects.com/mdn/rms_5891a1/afts/img/A*ZPRlRa7a-0QAAAAAAAAAAAAAARQnAQ" alt="" class="img_ev3q"></p>
<ol start="2">
<li>If you need to automatically release some resources before and after the document runs (such as automatically killing the process, deleting the docker container), you can add the resources to be released in the script. For example, if you want to implement &quot;automatically kill the etcd process every time a document is run&quot;, you can add to the script:</li>
</ol>
<p><img decoding="async" loading="lazy" src="https://gw.alipayobjects.com/mdn/rms_5891a1/afts/img/A*0th0Q7yn5MIAAAAAAAAAAAAAARQnAQ" alt="" class="img_ev3q"></p>
<ol start="3">
<li>After making the above changes, it is time to test the new CI.</li>
</ol>
<p>Run in the project root directory</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make style.quickstart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These documents will be tested:</p>
<p><img decoding="async" loading="lazy" src="https://gw.alipayobjects.com/mdn/rms_5891a1/afts/img/A*I7LRSryXwWYAAAAAAAAAAAAAARQnAQ" alt="" class="img_ev3q"></p>
<blockquote>
<p>[!TIP|label: run locally with caution, this script will delete some docker containers]
This command will delete the Docker containers that contain the keywords in the image. If you don&#x27;t want to delete these containers, don&#x27;t run them locally:
<img decoding="async" loading="lazy" src="https://gw.alipayobjects.com/mdn/rms_5891a1/afts/img/A*N3CIRb0883kAAAAAAAAAAAAAARQnAQ" alt="" class="img_ev3q"></p>
</blockquote>
<p>whereas if you run:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make style.quickstart QUICKSTART_VERSION=1.17</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following documents will be tested (these documents can only run successfully in golang 1.17 and above):</p>
<p><img decoding="async" loading="lazy" src="https://gw.alipayobjects.com/mdn/rms_5891a1/afts/img/A*X3F9QJSKq3QAAAAAAAAAAAAAARQnAQ" alt="" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/mosn/layotto/edit/main/development/test-quickstart.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/layotto/en-US/docs/development/contributing-doc"><div class="pagination-nav__sublabel">pre page</div><div class="pagination-nav__label">Document Contribution Guide</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/layotto/en-US/docs/development/developing-component"><div class="pagination-nav__sublabel">next page</div><div class="pagination-nav__label">Component Development Guide</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/development/test-quickstart#principle">Principle</a></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/development/test-quickstart#step-1-install-mdx">step 1. Install <code>mdx</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/development/test-quickstart#step-2-close-local-software-that-may-cause-conflicts">step 2. Close local software that may cause conflicts</a></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/development/test-quickstart#step-3-running-documentation">step 3. Running documentation</a></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/development/test-quickstart#step-4-reported-an-error-test-driven-development-optimize-your-documentation">step 4. Reported an error? Test-driven development, optimize your documentation!</a><ul><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/development/test-quickstart#q-how-to-write-testable-documents">Q: How to write &quot;testable&quot; documents</a></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/development/test-quickstart#other-markdown-annotations">Other markdown annotations</a></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/development/test-quickstart#fix-the-error-and-see-the-effect">Fix the error and see the effect!</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/layotto/en-US/docs/development/test-quickstart#step-5-modify-ci-to-automatically-test-the-newly-written-quickstart-document">step 5. Modify CI to automatically test the newly written quickstart document</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>