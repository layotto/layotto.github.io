"use strict";(self.webpackChunklayotto_docusaurus=self.webpackChunklayotto_docusaurus||[]).push([[3613],{5146:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>l});var o=n(4848),a=n(8453);const i={},s=void 0,r={id:"design/api_plugin/dapr_api",title:"dapr_api",description:"TLDR",source:"@site/i18n/en-US/docusaurus-plugin-content-docs/current/design/api_plugin/dapr_api.md",sourceDirName:"design/api_plugin",slug:"/design/api_plugin/dapr_api",permalink:"/layotto/en-US/docs/design/api_plugin/dapr_api",draft:!1,unlisted:!1,editUrl:"https://github.com/mosn/layotto/edit/main/design/api_plugin/dapr_api.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"API Plugin Design Documentation & Use Guide",permalink:"/layotto/en-US/docs/design/api_plugin/design"},next:{title:"Layotto object storage (OSS) and collection of API interface definitions and design",permalink:"/layotto/en-US/docs/design/oss/design"}},d={},l=[{value:"TLDR",id:"tldr",level:2},{value:"Issues to solve",id:"issues-to-solve",level:2},{value:"Programmes",id:"programmes",level:2},{value:"Layotto API on Dapr API",id:"layotto-api-on-dapr-api",level:3},{value:"User Value",id:"user-value",level:3},{value:"Q&amp;A",id:"qa",level:3},{value:"How to add a field to Dapr API",id:"how-to-add-a-field-to-dapr-api",level:4},{value:"Want to add a field (field)",id:"want-to-add-a-field-field",level:5},{value:"Not only fields but also logic, mechanisms (mechanism)",id:"not-only-fields-but-also-logic-mechanisms-mechanism",level:5},{value:"Want to add new API",id:"want-to-add-new-api",level:4}];function c(e){const t={h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h2,{id:"tldr",children:"TLDR"}),"\n",(0,o.jsx)(t.p,{children:'This proposal seeks to allow the open source Layotto to support both the Layotto API and the Dapr API.Similar to "Minio supports both Minio API, and AWS S3 API"'}),"\n",(0,o.jsx)(t.h2,{id:"issues-to-solve",children:"Issues to solve"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["At present, we try to ensure that the various fields in the Layotto API are defined in the same way as Dapr, but the real concern of the users is whether they can be reused.While we are trying to ensure consistency in the proto field, as long as sdk cannot be reused, we do not solve users' problems and increase maintenance costs for ourselves.\ne.g.\uff1a\n",(0,o.jsx)(t.img,{src:"https://user-images.githubusercontent.com/26001097/145837477-00fc5cd8-32eb-4ce9-bbfb-6e590172fce8.png",alt:"image"})]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"So we want Layotto directly support the grpc API in Dapr (like a package, including package), which he can freely switch between with Dapr sdk without fear of being bound by the manufacturer."}),"\n",(0,o.jsxs)(t.ol,{start:"2",children:["\n",(0,o.jsx)(t.li,{children:"On the other hand, some expansion is required.We found that the current Dapr API was not able to meet the needs completely, and some extension of the API was unavoidable.The extended API has been added to the current Layotto API. The proposal has been submitted to the Dapr community but is still waiting for it to be accepted by the community, such as config Is, such as the Lock API."}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"programmes",children:"Programmes"}),"\n",(0,o.jsx)(t.h3,{id:"layotto-api-on-dapr-api",children:"Layotto API on Dapr API"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://user-images.githubusercontent.com/26001097/145838604-e3a0caad-9473-4092-a2c6-0cc46c972790.png",alt:"image"})}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Layotto will start a grpc server with the frontline just adding an API plugin in the form of an API plugin."}),"\n",(0,o.jsx)(t.li,{children:"On the other hand, the Layotto API is retained.Layotto received the Layotto API request and translated into Dapr API, then proceeded to Dapr API.\nSuch benefits are\uff1a"}),"\n"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Reuse Code"}),"\n",(0,o.jsx)(t.li,{children:"The Layotto API can be expanded according to production needs, such as support to the Lock API, configuration API, etc.; it can be extended to the Dapr community and then slowly discuss, even if the outcome of the final discussion differs from the original proposal, it only affects the resulting Dapr API, and does not affect users already using Layotto API."}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"user-value",children:"User Value"}),"\n",(0,o.jsx)(t.p,{children:"For users Issal\uff1a"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"If users worry about the manufacturer's binding, they can only use Dapr API to migrate between Dapr and Layotto with the same set of Dapr sdk."}),"\n",(0,o.jsx)(t.li,{children:"If users believe our landed experience and are willing to use Layotto API, they can use Layotto API, at the cost of not migrating between two sidecar with the same sdk"}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"qa",children:"Q&A"}),"\n",(0,o.jsx)(t.h4,{id:"how-to-add-a-field-to-dapr-api",children:"How to add a field to Dapr API"}),"\n",(0,o.jsx)(t.h5,{id:"want-to-add-a-field-field",children:"Want to add a field (field)"}),"\n",(0,o.jsx)(t.p,{children:"For example, if you want to add a abc field to your layotto api, you can pass this field on to the dap API\ndapr API implementation and then pass it over to the component, which parses this field"}),"\n",(0,o.jsx)(t.h5,{id:"not-only-fields-but-also-logic-mechanisms-mechanism",children:"Not only fields but also logic, mechanisms (mechanism)"}),"\n",(0,o.jsx)(t.p,{children:"For example, layotto api adds a abc field if abc=true, then runtime takes a special logic"}),"\n",(0,o.jsx)(t.p,{children:"This will change the implementation of the Dapr API, plus an if else"}),"\n",(0,o.jsx)(t.h4,{id:"want-to-add-new-api",children:"Want to add new API"}),"\n",(0,o.jsx)(t.p,{children:"Add to the layotto API, the new API does not need to reuse Dapr API; wait for Dapr to receive the proposal before modifying it, layotto APIs."})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var o=n(6540);const a={},i=o.createContext(a);function s(e){const t=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),o.createElement(i.Provider,{value:t},e.children)}}}]);