"use strict";(self.webpackChunklayotto_docusaurus=self.webpackChunklayotto_docusaurus||[]).push([[6274],{6636:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>i});var n=s(4848),r=s(8453);const a={},o="use Secret API to obtain secret",l={id:"start/secret/start",title:"use Secret API to obtain secret",description:"What is Secret API",source:"@site/i18n/en-US/docusaurus-plugin-content-docs/current/start/secret/start.md",sourceDirName:"start/secret",slug:"/start/secret/start",permalink:"/layotto/en-US/docs/start/secret/start",draft:!1,unlisted:!1,editUrl:"https://github.com/mosn/layotto/edit/main/start/secret/start.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Use Sequencer API to generate distributed unique and self-incrementing id",permalink:"/layotto/en-US/docs/start/sequencer/start"},next:{title:"Hello World",permalink:"/layotto/en-US/docs/start/rpc/helloworld"}},c={},i=[{value:"What is Secret API",id:"what-is-secret-api",level:2},{value:"Quick start",id:"quick-start",level:2},{value:"Step 1:  Run Layotto",id:"step-1--run-layotto",level:3},{value:"Step 2: Run the client program and call Layotto to get the secret",id:"step-2-run-the-client-program-and-call-layotto-to-get-the-secret",level:3},{value:"<strong>Go</strong>",id:"go",level:3},{value:"<strong>Java</strong>",id:"java",level:3},{value:"Want to learn more about Secret API?",id:"want-to-learn-more-about-secret-api",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"use-secret-api-to-obtain-secret",children:"use Secret API to obtain secret"}),"\n",(0,n.jsx)(t.h2,{id:"what-is-secret-api",children:"What is Secret API"}),"\n",(0,n.jsx)(t.p,{children:"The secret API is used to obtain secret from file, env, k8s, etc"}),"\n",(0,n.jsx)(t.p,{children:"Get all API and secret support"}),"\n",(0,n.jsx)(t.h2,{id:"quick-start",children:"Quick start"}),"\n",(0,n.jsx)(t.p,{children:"This example shows how to obtain the secret in file, env and k8s through the Layotto secret API"}),"\n",(0,n.jsx)(t.h3,{id:"step-1--run-layotto",children:"Step 1:  Run Layotto"}),"\n",(0,n.jsx)(t.p,{children:"After downloading the project code to the local, switch the code directory and compile:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"cd ${project_path}/cmd/layotto\n"})}),"\n",(0,n.jsx)(t.p,{children:"build:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",metastring:"@if.not.exist layotto",children:"go build -o layotto\n"})}),"\n",(0,n.jsx)(t.p,{children:"Once finished, the layotto file will be generated in the directory, run it:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",metastring:"@background",children:"./layotto start -c ../../configs/config_standalone.json\n"})}),"\n",(0,n.jsx)(t.h3,{id:"step-2-run-the-client-program-and-call-layotto-to-get-the-secret",children:"Step 2: Run the client program and call Layotto to get the secret"}),"\n",(0,n.jsx)(t.h3,{id:"go",children:(0,n.jsx)(t.strong,{children:"Go"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:" cd ${project_path}/demo/secret/common/\n"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",metastring:"@if.not.exist client",children:" go build -o client\n"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:' ./client -s "secret_demo"\n'})}),"\n",(0,n.jsx)(t.p,{children:"If the following information is printed, the demo is successful:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:'data:{key:"db-user-pass:password" value:"S!S*d$zDsb="}\ndata:{key:"db-user-pass:password" value:{secrets:{key:"db-user-pass:password" value:"S!S*d$zDsb="}}} data:{key:"db-user-pass:username" value:{secrets:{key:"db-user-pass:username" value:"devuser"}}}\n'})}),"\n",(0,n.jsx)(t.h3,{id:"java",children:(0,n.jsx)(t.strong,{children:"Java"})}),"\n",(0,n.jsx)(t.p,{children:"Download java sdk and examples:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",metastring:"@if.not.exist java-sdk",children:"git clone https://github.com/layotto/java-sdk\n"})}),"\n",(0,n.jsx)(t.p,{children:"Change directory:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"cd java-sdk\n"})}),"\n",(0,n.jsx)(t.p,{children:"Build:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",metastring:"@if.not.exist examples-secret/target/examples-secret-jar-with-dependencies.jar",children:"# build example jar\nmvn -f examples-secret/pom.xml clean package\n"})}),"\n",(0,n.jsx)(t.p,{children:"Run the examples:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"java -jar examples-secret/target/examples-secret-jar-with-dependencies.jar\n"})}),"\n",(0,n.jsx)(t.p,{children:"And you will see:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"{db-user-pass:password=S!S*d$zDsb=}\n{redisPassword={redisPassword=redis123}, db-user-pass:password={db-user-pass:password=S!S*d$zDsb=}, db-user-pass:username={db-user-pass:username=devuser}}\n"})}),"\n",(0,n.jsx)(t.h2,{id:"want-to-learn-more-about-secret-api",children:"Want to learn more about Secret API?"}),"\n",(0,n.jsxs)(t.p,{children:["Layotto reuse Dapr Secret API\uff0clearn more\uff1a",(0,n.jsx)(t.a,{href:"https://docs.dapr.io/operations/components/setup-secret-store/",children:"https://docs.dapr.io/operations/components/setup-secret-store/"})]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>l});var n=s(6540);const r={},a=n.createContext(r);function o(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);