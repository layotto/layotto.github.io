"use strict";(self.webpackChunklayotto_docusaurus=self.webpackChunklayotto_docusaurus||[]).push([[1914],{7950:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>c});var n=o(4848),i=o(8453);const s={},l="Addition and deletion of files based on MinIO OSS",r={id:"start/file/minio",title:"Addition and deletion of files based on MinIO OSS",description:"Quick Start",source:"@site/i18n/en-US/docusaurus-plugin-content-docs/current/start/file/minio.md",sourceDirName:"start/file",slug:"/start/file/minio",permalink:"/layotto/en-US/docs/start/file/minio",draft:!1,unlisted:!1,editUrl:"https://github.com/mosn/layotto/edit/main/start/file/minio.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Hello World",permalink:"/layotto/en-US/docs/start/rpc/helloworld"},next:{title:"OSS",permalink:"/layotto/en-US/docs/start/oss/"}},a={},c=[{value:"Quick Start",id:"quick-start",level:2},{value:"step 1. Start MinIO and Layotto",id:"step-1-start-minio-and-layotto",level:3},{value:"<strong>Using Docker Compose</strong>",id:"using-docker-compose",level:4},{value:"<strong>Local compilation (not for Windows)</strong>",id:"local-compilation-not-for-windows",level:4},{value:"step 1.1. Start MinIO service",id:"step-11-start-minio-service",level:4},{value:"step 1.2. Start layotto",id:"step-12-start-layotto",level:4},{value:"step 2. Start testing demo",id:"step-2-start-testing-demo",level:3},{value:"Step 3. Destruction of containers, release of resources",id:"step-3-destruction-of-containers-release-of-resources",level:3},{value:"<strong>Close Docker Compose</strong>",id:"close-docker-compose",level:4},{value:"<strong>Destroy the MinIO Docker container</strong>",id:"destroy-the-minio-docker-container",level:4},{value:"Continue to experience other APIs later",id:"continue-to-experience-other-apis-later",level:4},{value:"Learn how to implement File API",id:"learn-how-to-implement-file-api",level:4}];function d(e){const t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"addition-and-deletion-of-files-based-on-minio-oss",children:"Addition and deletion of files based on MinIO OSS"}),"\n",(0,n.jsx)(t.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,n.jsxs)(t.p,{children:["Layotto provides examples ",(0,n.jsx)(t.a,{href:"https://github.com/mosn/layotto/blob/main/demo/file/client.go",children:"demo"})," for access files."]}),"\n",(0,n.jsx)(t.h3,{id:"step-1-start-minio-and-layotto",children:"step 1. Start MinIO and Layotto"}),"\n",(0,n.jsx)(t.h4,{id:"using-docker-compose",children:(0,n.jsx)(t.strong,{children:"Using Docker Compose"})}),"\n",(0,n.jsx)(t.p,{children:"You can start MinIO and Layotto with docker-compose"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"cd docker/layotto-minio\n# Start MinIO and layotto with docker-compose\ndocker-compose up -d\n"})}),"\n",(0,n.jsx)(t.h4,{id:"local-compilation-not-for-windows",children:(0,n.jsx)(t.strong,{children:"Local compilation (not for Windows)"})}),"\n",(0,n.jsx)(t.p,{children:"You can use Docker to run MinIO, and then compile locally and run Layotto."}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"[!TIP|label: don't fit for Windows users]\nLayotto will fail to compile under Windows.It is recommended that Windows users deploy using docker-compose"}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"step-11-start-minio-service",children:"step 1.1. Start MinIO service"}),"\n",(0,n.jsxs)(t.p,{children:["You can use Docker to launch local MinIO, reference",(0,n.jsx)(t.a,{href:"https://min.io/docs/minio/container/index.html",children:"\u5b98\u65b9\u6587\u6863"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:'docker run -d -p 9000:9000-p 90:9090 --name minio \\\n-e "MINIO_ROOT_USER=layotto" \\\n-e "MINIO_ROOT_PASSORD=layotto_secretariat" \\\n--restore=always \\\nminio/minio server / data --console-address \':909\'\n'})}),"\n",(0,n.jsx)(t.h4,{id:"step-12-start-layotto",children:"step 1.2. Start layotto"}),"\n",(0,n.jsxs)(t.p,{children:["layotto offers minio's configuration file",(0,n.jsx)(t.a,{href:"https://github.com/mosn/layotto/blob/main/configs/config_file.json",children:"oss\u914d\u7f6e"}),", as shown below"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'                      "file": {\n                        "minio": {\n                          "metadata":[\n                            {\n                              "endpoint": "play.min.io",\n                              "accessKeyID": "Q3AM3UQ867SPQQA43P2F",\n                              "accessKeySecret": "zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG",\n                              "SSL":true,\n                              "region":"us-east-1"\n                            }\n                          ]\n                        }\n                      }\n'})}),"\n",(0,n.jsxs)(t.p,{children:["The default configuration will be linked to ",(0,n.jsx)(t.code,{children:"play.min.io"}),". If you deploy Minio, you can modify the configuration as necessary."]}),"\n",(0,n.jsx)(t.p,{children:"When configured, toggle directory:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"#\u5907\u6ce8 \u8bf7\u5c06${project_path}\u66ff\u6362\u6210\u4f60\u7684\u9879\u76ee\u8def\u5f84\ncd ${project_path}/cmd/layotto\n"})}),"\n",(0,n.jsx)(t.p,{children:"Build:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",metastring:"@if.not.exist layotto",children:"go build -o layotto\n"})}),"\n",(0,n.jsx)(t.p,{children:"Start Layotto:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",metastring:"@background",children:"./layotto start --config ../../configs/config_file.json\n"})}),"\n",(0,n.jsx)(t.h3,{id:"step-2-start-testing-demo",children:"step 2. Start testing demo"}),"\n",(0,n.jsxs)(t.p,{children:["Layotto provides example [demo]for access files (",(0,n.jsx)(t.a,{href:"https://github.com/mosn/layotto/blob/main/demo/file/client.go",children:"https://github.com/mosn/layotto/blob/main/demo/file/client.go"}),")"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:'cd ${project_path}/demo/file\ngo build client.go\n\n# \u521b\u5efa\u540d\u4e3atest\u7684bucket\n./client bucket test\n# \u4e0a\u4f20\u6587\u4ef6\u5230test bucket\uff0c\u524d\u7f00\u4e3ahello\uff0c\u5185\u5bb9\u4e3a"hello layotto"\n./client put test/hello/layotto.txt "hello layotto"\n# \u83b7\u53d6 layotto.txt\u7684\u5185\u5bb9\n./client get test/hello/layotto.txt\n# \u83b7\u53d6test bucket\u4e0b\u7684\u524d\u7f00\u4e3ahello\u7684\u6240\u6709\u6587\u4ef6\u5217\u8868\n./client list test/hello\n# \u83b7\u53d6layotto.txt\u6587\u4ef6\u7684\u5143\u6570\u636e\n./client stat test/hello/layotto.txt\n# \u5220\u9664layotto.txt\u6587\u4ef6\n./client del test/hello/layotto.txt\n'})}),"\n",(0,n.jsx)(t.h3,{id:"step-3-destruction-of-containers-release-of-resources",children:"Step 3. Destruction of containers, release of resources"}),"\n",(0,n.jsx)(t.h4,{id:"close-docker-compose",children:(0,n.jsx)(t.strong,{children:"Close Docker Compose"})}),"\n",(0,n.jsx)(t.p,{children:"If you started with docker-compose, MinIO and Layotto can be turned off\uff1a as follows."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"cd ${project_path}/docker/layotto-minio\ndocker-compose stop\n"})}),"\n",(0,n.jsx)(t.h4,{id:"destroy-the-minio-docker-container",children:(0,n.jsx)(t.strong,{children:"Destroy the MinIO Docker container"})}),"\n",(0,n.jsx)(t.p,{children:"If you are MinIO, started with Docker, you can destroy the MinIO container\uff1a"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"docker rm -f minio\n"})}),"\n",(0,n.jsx)(t.h4,{id:"continue-to-experience-other-apis-later",children:"Continue to experience other APIs later"}),"\n",(0,n.jsx)(t.p,{children:"Continue to experience other APIs with the navigation bar on the left!"}),"\n",(0,n.jsx)(t.h4,{id:"learn-how-to-implement-file-api",children:"Learn how to implement File API"}),"\n",(0,n.jsxs)(t.p,{children:["If you are interested in implementing the rationale or want to expand some features, you can read the ",(0,n.jsx)(t.a,{href:"/layotto/en-US/docs/design/file/file-design",children:"File API design document"})]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>l,x:()=>r});var n=o(6540);const i={},s=n.createContext(i);function l(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);