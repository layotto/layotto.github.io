"use strict";(self.webpackChunklayotto_docusaurus=self.webpackChunklayotto_docusaurus||[]).push([[9098],{4136:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var n=o(4848),l=o(8453);const r={},i="API plugin: register your own API",s={id:"start/api_plugin/helloworld",title:"API plugin: register your own API",description:"This is a demo to show you how to register your own API.",source:"@site/i18n/en-US/docusaurus-plugin-content-docs/current/start/api_plugin/helloworld.md",sourceDirName:"start/api_plugin",slug:"/start/api_plugin/helloworld",permalink:"/layotto/en-US/docs/start/api_plugin/helloworld",draft:!1,unlisted:!1,editUrl:"https://github.com/mosn/layotto/edit/main/start/api_plugin/helloworld.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Lifecycle API demo",permalink:"/layotto/en-US/docs/start/lifecycle/start"},next:{title:"Generate API plugin automatically",permalink:"/layotto/en-US/docs/start/api_plugin/generate"}},a={},d=[{value:"step 1. start Layotto with a new helloworld API",id:"step-1-start-layotto-with-a-new-helloworld-api",level:2},{value:"step 2. invoke the helloworld API",id:"step-2-invoke-the-helloworld-api",level:2},{value:"Next",id:"next",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"api-plugin-register-your-own-api",children:"API plugin: register your own API"}),"\n",(0,n.jsx)(t.p,{children:"This is a demo to show you how to register your own API."}),"\n",(0,n.jsx)(t.p,{children:"Layotto has the api-plugin feature to let you add your own API based on your need."}),"\n",(0,n.jsx)(t.h2,{id:"step-1-start-layotto-with-a-new-helloworld-api",children:"step 1. start Layotto with a new helloworld API"}),"\n",(0,n.jsx)(t.p,{children:"Change directory:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"# change directory \ncd ${project_path}/cmd/layotto_multiple_api\n"})}),"\n",(0,n.jsx)(t.p,{children:"Build Layotto :"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",metastring:"@if.not.exist layotto",children:"# build it\ngo build -o layotto\n"})}),"\n",(0,n.jsx)(t.p,{children:"Run Layotto:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",metastring:"@background",children:"./layotto start -c ../../configs/config_standalone.json\n"})}),"\n",(0,n.jsx)(t.p,{children:"Q: What happened?"}),"\n",(0,n.jsxs)(t.p,{children:["Check the code in ",(0,n.jsx)(t.a,{href:"https://github.com/mosn/layotto/blob/d74ff0e8940e0eb9c73b1d3275a17d29be36bd5c/cmd/layotto_multiple_api/main.go#L203",children:(0,n.jsx)(t.code,{children:"main.go"})})," and you will find a new API was registered during startup:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-go",children:"\t\t// register your grpc API here\n        runtime.WithGrpcAPI(\n            // default grpc API\n            default_api.NewGrpcAPI,\n            // a demo to show how to register your own API\n            helloworld_api.NewHelloWorldAPI,\n        ),\n"})}),"\n",(0,n.jsx)(t.h2,{id:"step-2-invoke-the-helloworld-api",children:"step 2. invoke the helloworld API"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"# change directory \ncd ${project_path}/cmd/layotto_multiple_api\n# run demo client\ngo run client/main.go\n"})}),"\n",(0,n.jsx)(t.p,{children:"The result will be:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"Greeting: Hello world\n"})}),"\n",(0,n.jsx)(t.p,{children:"This message is the response of the helloworld API you just registered in step 1."}),"\n",(0,n.jsx)(t.h2,{id:"next",children:"Next"}),"\n",(0,n.jsx)(t.p,{children:"You can refer to the demo code to implement your own API. Have a try !"}),"\n",(0,n.jsxs)(t.p,{children:["For more details,you can refer to the ",(0,n.jsx)(t.a,{href:"/layotto/en-US/docs/design/api_plugin/design",children:"design doc"})]})]})}function h(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>i,x:()=>s});var n=o(6540);const l={},r=n.createContext(l);function i(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);